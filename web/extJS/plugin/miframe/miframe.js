/*
 * ux.ManagedIFrame for ExtJS Library 3.1+
 * Copyright(c) 2008-2009 Active Group, Inc.
 * licensing@theactivegroup.com
 * http://licensing.theactivegroup.com
 */
Ext.namespace("Ext.ux.plugin");Ext.onReady(function(){var a=Ext.util.CSS;if(a){a.getRule(".x-hide-nosize")||a.createStyleSheet(".x-hide-nosize{height:0px!important;width:0px!important;border:none!important;zoom:1;}.x-hide-nosize * {height:0px!important;width:0px!important;border:none!important;zoom:1;}");a.refreshCache()}});(function(){var g=Ext.Element,b=Ext.lib.Anim,a=g.prototype;var f="visibility",d="display",c="hidden",h="none";var e={};e.El={setDisplayed:function(j){var i=this;i.visibilityCls?(i[j!==false?"removeClass":"addClass"](i.visibilityCls)):a.setDisplayed.call(i,j);return i},isDisplayed:function(){return !(this.hasClass(this.visibilityCls)||this.dom.style[d]==h)},fixDisplay:function(){var i=this;a.fixDisplay.call(i);i.visibilityCls&&i.removeClass(i.visibilityCls)},isVisible:function(i){return this.visible||(!this.isStyle(f,c)&&this.visibilityCls?!this.hasClass(this.visibilityCls):!this.isStyle(d,h))}};Ext.override(g.Flyweight,e.El);Ext.ux.plugin.VisibilityMode=function(j){Ext.apply(this,j||{});var i=Ext.util.CSS;if(i&&!Ext.isIE&&this.fixMaximizedWindow!==false&&!Ext.ux.plugin.VisibilityMode.MaxWinFixed){i.updateRule(".x-window-maximized-ct","overflow","");Ext.ux.plugin.VisibilityMode.MaxWinFixed=true}};Ext.extend(Ext.ux.plugin.VisibilityMode,Object,{bubble:true,fixMaximizedWindow:true,elements:null,visibilityCls:"x-hide-nosize",hideMode:"nosize",ptype:"uxvismode",init:function(m){var j=this.hideMode||m.hideMode,l=this,i=Ext.Container.prototype.bubble,k=function(){var p=[this.collapseEl,this.actionMode].concat(l.elements||[]);Ext.each(p,function(q){l.extend(this[q]||q)},this);var n={visFixed:true,animCollapse:false,animFloat:false,hideMode:j,defaults:this.defaults||{}};n.defaults.hideMode=j;Ext.apply(this,n);Ext.apply(this.initialConfig||{},n)};m.on("render",function(){if(l.bubble!==false&&this.ownerCt){i.call(this.ownerCt,function(){this.visFixed||this.on("afterlayout",k,this,{single:true})})}k.call(this)},m,{single:true})},extend:function(i,j){i&&Ext.each([].concat(i),function(k){if(k&&k.dom){if("visibilityCls" in k){return}Ext.apply(k,e.El);k.visibilityCls=j||this.visibilityCls}},this);return this}});Ext.preg&&Ext.preg("uxvismode",Ext.ux.plugin.VisibilityMode);Ext.provide&&Ext.provide("uxvismode")})();(function(){var w=Ext.Element,ab,P=Ext.lib.Dom,r=Ext.lib.Anim,y=Ext.EventManager,m=Ext.lib.Event,X=document,L=function(){},C=Object.prototype,h=C.toString,R="[object HTMLDocument]";if(!Ext.elCache){throw"Ext Release is not supported"}Ext._documents={};Ext._documents[Ext.id(document,"_doc")]=Ext.elCache;var V=P.resolveDocumentCache=function(E,ay){var aw=an(E),az=Ext.isDocument(aw)?Ext.id(aw):ay,A=Ext._documents[az]||null,ax,av;if(!A&&aw&&(av=aw.parentWindow||aw.defaultView)){if(ax=av.frameElement){az=ax.id||ax.name}}return A||Ext._documents[az]||(az?Ext._documents[az]={}:null)},S=P.clearDocumentCache=function(A){delete Ext._documents[A]};w.addMethods||(w.addMethods=function(A){Ext.apply(w.prototype,A||{})});Ext.removeNode=function(aA){var az=aA?aA.dom||aA:null;if(az&&az.parentNode&&az.tagName!="BODY"){var E,ay,aw=P.getDocument(az),A=V(az);if((ay=A[az.id])&&(E=ay.el)){if(E.dom){(Ext.enableNestedListenerRemoval)?y.purgeElement(E.dom,true):y.removeAll(E.dom)}delete A[az.id];delete E.dom;delete E._context;E=null}if(Ext.isIE&&!Ext.isIE8){var ax=aw.createElement("div");ax.appendChild(az);ax.removeChild(az);ax=null}else{var av=az.parentElement||az.parentNode;av&&av.removeChild(az);av=null}}az=null};var ad=function(az,ax){var ay=typeof az==="function"?az:function aw(){};var av=ay._ovl;if(!av){av={base:ay};av[ay.length||0]=ay;ay=function aw(){var aC=arguments.callee._ovl;var aB=aC[arguments.length]||aC.base;return aB&&aB!=arguments.callee?aB.apply(this,arguments):undefined}}var aA=[].concat(ax);for(var E=0,A=aA.length;E<A;++E){av[aA[E].length]=aA[E]}ay._ovl=av;var aw=null;return ay};Ext.applyIf(Ext,{overload:ad(ad,[function(A){return ad(null,A)},function(av,E,A){return av[E]=ad(av[E],A)}]),isArray:function(A){return !!A&&h.apply(A)=="[object Array]"},isObject:function(A){return !!A&&typeof A=="object"},isDocument:function(E,A){var ax=E?E.dom||E:null;var aw=h.apply(ax)==R||(ax&&ax.nodeType==9);if(aw&&A){try{aw=!!ax.location}catch(av){return false}}return aw},isWindow:function(A){var E=A?A.dom||A:null;return E?!!E.navigator||h.apply(E)=="[object Window]":false},isIterable:function(A){if(A===null||A===undefined){return false}if(Ext.isArray(A)||!!A.callee||Ext.isNumber(A.length)){return true}return !!((/NodeList|HTMLCollection/i).test(h.call(A))||A.nextNode||A.item||false)},isElement:function(A){return A&&Ext.type(A)=="element"},isEvent:function(A){return h.apply(A)=="[object Event]"||(Ext.isObject(A)&&!Ext.type(o.constructor)&&(window.event&&A.clientX&&A.clientX==window.event.clientX))},isFunction:function(A){return !!A&&typeof A=="function"},isEventSupported:function(aw,ax){var av={select:"input",change:"input",submit:"form",reset:"form",load:"img",error:"img",abort:"img"},A={},ay=/^on/i,E=function(aB,aA){var az=Ext.getDom(aA);return(az?(Ext.isElement(az)||Ext.isDocument(az)?az.nodeName.toLowerCase():aA.self?"#window":aA||"#object"):aA||"div")+":"+aB};return function(aD,aF){aD=(aD||"").replace(ay,"");var aE,aC=false;var aA="on"+aD;var az=(aF?aF:av[aD])||"div";var aB=E(aD,az);if(aB in A){return A[aB]}aE=Ext.isString(az)?X.createElement(az):aF;aC=(!!aE&&(aA in aE));aC||(aC=window.Event&&!!(String(aD).toUpperCase() in window.Event));if(!aC&&aE){aE.setAttribute&&aE.setAttribute(aA,"return;");aC=Ext.isFunction(aE[aA])}A[aB]=aC;aE=null;return aC}}()});var u=function(A){return w[(A.tagName||"-").toUpperCase()]||w};var aj;function aa(A,E){if(!aj){aj=new Ext.Element.Flyweight()}aj.dom=Ext.getDom(A,E);return aj}Ext.apply(Ext,{get:w.get=function(av,ax){if(!av){return null}Ext.isDocument(ax)||(ax=X);var E,aA,az,A=V(ax);if(typeof av=="string"){aA=Ext.getDom(av,ax);if(!aA){return null}if(A[av]&&A[av].el){E=A[av].el;E.dom=aA}else{E=(A[av]={el:new (u(aA))(aA,null,ax),data:{},events:{}}).el}return E}else{if(av.tagName||Ext.isWindow(av)){A=V(av);az=av.id||(az=Ext.id(av));if(A[az]&&(E=A[az].el)){E.dom=av}else{E=(A[az]={el:new (u(av))(av,null,ax),data:{},events:{}}).el}return E}else{if(av instanceof w){A=V(av);av.dom=av.getDocument().getElementById(av.id)||av.dom;if(av.dom){(A[av.id]||(A[av.id]={data:{},events:{}})).el=av}return av}else{if(Ext.isDocument(av)){if(!Ext.isDocument(av,true)){return false}A=V(av);if(A[Ext.id(av)]&&A[av.id].el){return A[av.id].el}var aw=function(){};aw.prototype=w.prototype;var ay=new aw();ay.dom=av;ay.id=Ext.id(av,"_doc");ay._isDoc=true;return(A[ay.id]={el:ay,data:{},events:{}}).el}else{if(av.isComposite){return av}else{if(Ext.isArray(av)){return Ext.get(ax,ax).select(av)}}}}}}return null},getDom:function(A,av){if(!A){return null}var E=av||X;return A.dom?A.dom:(typeof A=="string"&&E.getElementById?E.getElementById(A):A)},getBody:function(E){var A=P.getDocument(E)||X;return Ext.get(A.body||A.documentElement)},getDoc:Ext.overload([Ext.getDoc,function(A){return Ext.get(A,A)}])});w.data=function(E,A,av){E=w.get(E);if(!E){return null}var aw=V(E)[E.id].data;if(arguments.length==2){return aw[A]}else{return(aw[A]=av)}};var af={},W=/(-[a-z])/gi,K=function(A,E){return E.charAt(1).toUpperCase()},H=/alpha\(opacity=(.*)\)/i,t=/^\s+|\s+$/g,j=Ext.isIE?"styleFloat":"cssFloat",c=X.defaultView,ae="visibilityMode",x=w.DISPLAY,q="originalDisplay",D="padding",ah="margin",am="border",O="-left",ar="-right",Y="-top",U="-bottom",e="-width",aq=Math,g="visibility",a="display",ao="hidden",ac="none",v="isClipped",al="overflow",J="overflow-x",G="overflow-y",N="originalClip",s="x-masked",T="x-masked-relative",p={l:am+O+e,r:am+ar+e,t:am+Y+e,b:am+U+e},ak={l:D+O,r:D+ar,t:D+Y,b:D+U},i={l:ah+O,r:ah+ar,t:ah+Y,b:ah+U},au=w.data,ag=Ext.getDom,B=Ext.get,b=Ext.DomHelper,z=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,n=Ext.util.CSS,at=function(E){var A=au(E,q);if(A===undefined){au(E,q,A="")}return A},M=function(E){var A=au(E,ae);if(A===undefined){au(E,ae,A=1)}return A};function k(A){return af[A]||(af[A]=A=="float"?j:A.replace(W,K))}w.addMethods({getDocument:function(){return this._context||(this._context=an(this))},remove:function(E,A){var av=this.dom;this.isMasked()&&this.unmask();if(av){E&&this.cleanse(true,A);Ext.removeNode(av);delete this._context;delete this.dom}},cleanse:function(E,av){if(this.isCleansed&&E!==true){return this}var aw=this.dom,ax=aw.firstChild,A;while(aw&&ax){A=ax.nextSibling;av&&Ext.fly(ax,"_cleanser").cleanse(E,av);Ext.removeNode(ax);ax=A}delete w._flyweights._cleanser;this.isCleansed=true;return this},appendChild:function(A,E){return B(A,E||this.getDocument()).appendTo(this)},appendTo:function(A,E){ag(A,E||this.getDocument()).appendChild(this.dom);return this},insertBefore:function(A,E){(A=ag(A,E||this.getDocument())).parentNode.insertBefore(this.dom,A);return this},insertAfter:function(A,E){(A=ag(A,E||this.getDocument())).parentNode.insertBefore(this.dom,A.nextSibling);return this},insertFirst:function(E,A){E=E||{};if(E.nodeType||E.dom||typeof E=="string"){E=ag(E);this.dom.insertBefore(E,this.dom.firstChild);return !A?B(E):E}else{return this.createChild(E,this.dom.firstChild,A)}},replace:function(A,E){A=B(A,E||this.getDocument());this.insertBefore(A);A.remove();return this},replaceWith:function(A,av){var E=this;if(A.nodeType||A.dom||typeof A=="string"){A=ag(A,av||E.getDocument());E.dom.parentNode.insertBefore(A,E.dom)}else{A=b.insertBefore(E.dom,A)}var aw=V(E)||{};Ext.removeNode(E.dom);E.id=Ext.id(E.dom=A);return(aw[E.id]={el:E,events:{},data:{}}).el},insertHtml:function(E,av,A){var aw=b.insertHtml(E,this.dom,av);return A?Ext.get(aw,an(aw)):aw},setVisibilityMode:function(A){au(this.dom,ae,A);return this},setVisible:function(ax,E){var av=this,aw=av.dom,A=M(this.dom)==x;if(!E||!av.anim){if(A){av.setDisplayed(ax)}else{av.fixDisplay();aw.style.visibility=ax?"visible":ao}}else{if(ax){av.setOpacity(0.01);av.setVisible(true)}av.anim({opacity:{to:(ax?1:0)}},av.preanim(arguments,1),null,0.35,"easeIn",function(){if(!ax){aw.style[A?a:g]=(A)?ac:ao;Ext.fly(aw).setOpacity(1)}})}return av},setDisplayed:function(A){if(typeof A=="boolean"){A=A?at(this.dom):ac}this.setStyle(a,A);return this},fixDisplay:function(){var A=this;if(A.isStyle(a,ac)){A.setStyle(g,ao);A.setStyle(a,at(this.dom));if(A.isStyle(a,ac)){A.setStyle(a,"block")}}},enableDisplayMode:function(A){this.setVisibilityMode(w.DISPLAY);if(!Ext.isEmpty(A)){au(this.dom,q,A)}return this},scrollIntoView:function(av,ay){var aD=this.getDocument();var aE=Ext.getDom(av,aD)||Ext.getBody(aD).dom;var ax=this.dom;var aw=this.getOffsetsTo(aE),aI=this.getScroll(),aA=aw[0]+aI.left,aH=aw[1]+aI.top,aF=aH+ax.offsetHeight,E=aA+ax.offsetWidth;var A=aE.clientHeight;var aB=parseInt(aE.scrollTop,10);var aG=parseInt(aE.scrollLeft,10);var az=aB+A;var aC=aG+aE.clientWidth;if(ax.offsetHeight>A||aH<aB){aE.scrollTop=aH}else{if(aF>az){aE.scrollTop=aF-A}}aE.scrollTop=aE.scrollTop;if(ay!==false){if(ax.offsetWidth>aE.clientWidth||aA<aG){aE.scrollLeft=aA}else{if(E>aC){aE.scrollLeft=E-aE.clientWidth}}aE.scrollLeft=aE.scrollLeft}return this},contains:function(A){try{return !A?false:P.isAncestor(this.dom,A.dom?A.dom:A)}catch(E){return false}},getScroll:function(){var az=this.dom,ay=this.getDocument(),A=ay.body,av=ay.documentElement,E,ax,aw;if(Ext.isDocument(az)||az==A){if(Ext.isIE&&P.docIsStrict(ay)){E=av.scrollLeft;ax=av.scrollTop}else{E=window.pageXOffset;ax=window.pageYOffset}aw={left:E||(A?A.scrollLeft:0),top:ax||(A?A.scrollTop:0)}}else{aw={left:az.scrollLeft,top:az.scrollTop}}return aw},getStyle:function(){var A=c&&c.getComputedStyle?function E(az){var ay=!this._isDoc?this.dom:null,av,ax,aw;if(!ay||ay==X||Ext.isDocument(ay)){return null}az=k(az);aw=(av=ay.style[az])?av:(ax=c.getComputedStyle(ay,""))?ax[az]:null;if(Ext.isWebKit&&aw=="rgba(0, 0, 0, 0)"){aw="transparent"}return aw}:function E(az){var ax=!this._isDoc?this.dom:null,av,aw;if(!ax||ax==X||Ext.isDocument(ax)){return null}if(az=="opacity"){if(ax.style.filter.match){if(av=ax.style.filter.match(H)){var ay=parseFloat(av[1]);if(!isNaN(ay)){return ay?ay/100:0}}}return 1}az=k(az);return ax.style[az]||((aw=ax.currentStyle)?aw[az]:null)};var E=null;return A}(),setStyle:function(ax,aw){if(this._isDoc||Ext.isDocument(this.dom)){return this}var E,av,A;if(!Ext.isObject(ax)){E={};E[ax]=aw;ax=E}for(av in ax){aw=ax[av];av=="opacity"?this.setOpacity(aw):this.dom.style[k(av)]=aw}return this},center:function(A){return this.alignTo(A||this.getDocument(),"c-c")},mask:function(E,ay){var aA=this,aw=aA.dom,az=Ext.DomHelper,ax="ext-el-mask-msg",A,aB;if(aA.getStyle("position")=="static"){aA.addClass(T)}if((A=au(aw,"maskMsg"))){A.remove()}if((A=au(aw,"mask"))){A.remove()}aB=az.append(aw,{cls:"ext-el-mask"},true);au(aw,"mask",aB);aA.addClass(s);aB.setDisplayed(true);if(typeof E=="string"){var av=az.append(aw,{cls:ax,cn:{tag:"div"}},true);au(aw,"maskMsg",av);av.dom.className=ay?ax+" "+ay:ax;av.dom.firstChild.innerHTML=E;av.setDisplayed(true);av.center(aA)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&aA.getStyle("height")=="auto"){aB.setSize(undefined,aA.getHeight())}return aB},unmask:function(){var av=this,aw=av.dom,A=au(aw,"mask"),E=au(aw,"maskMsg");if(A){if(E){E.remove();au(aw,"maskMsg",undefined)}A.remove();au(aw,"mask",undefined)}av.removeClass([s,T])},isMasked:function(){var A=au(this.dom,"mask");return A&&A.isVisible()},getCenterXY:function(){return this.getAlignToXY(this.getDocument(),"c-c")},getAnchorXY:function(ax,aC,aH){ax=(ax||"tl").toLowerCase();aH=aH||{};var aB=this,aE=this.getDocument(),E=aB.dom==aE.body||aB.dom==aE,aF=aH.width||E?Ext.lib.Dom.getViewWidth(false,aE):aB.getWidth(),az=aH.height||E?Ext.lib.Dom.getViewHeight(false,aE):aB.getHeight(),aG,A=Math.round,av=aB.getXY(),aD=aB.getScroll(),aA=E?aD.left:!aC?av[0]:0,ay=E?aD.top:!aC?av[1]:0,aw={c:[A(aF*0.5),A(az*0.5)],t:[A(aF*0.5),0],l:[0,A(az*0.5)],r:[aF,A(az*0.5)],b:[A(aF*0.5),az],tl:[0,0],bl:[0,az],br:[aF,az],tr:[aF,0]};aG=aw[ax];return[aG[0]+aA,aG[1]+ay]},anchorTo:function(E,ay,av,A,aA,aB){var az=this,ax=az.dom;function aw(){aa(ax).alignTo(E,ay,av,A);Ext.callback(aB,aa(ax))}Ext.EventManager.onWindowResize(aw,az);if(!Ext.isEmpty(aA)){Ext.EventManager.on(window,"scroll",aw,az,{buffer:!isNaN(aA)?aA:50})}aw.call(az);return az},getScroll:function(){var az=this.dom,ay=this.getDocument(),A=ay.body,av=ay.documentElement,E,ax,aw;if(az==ay||az==A){if(Ext.isIE&&P.docIsStrict(ay)){E=av.scrollLeft;ax=av.scrollTop}else{E=window.pageXOffset;ax=window.pageYOffset}aw={left:E||(A?A.scrollLeft:0),top:ax||(A?A.scrollTop:0)}}else{aw={left:az.scrollLeft,top:az.scrollTop}}return aw},getAlignToXY:function(aw,aI,aJ){var aV;aw=Ext.get(aw,aV=this.getDocument());if(!aw||!aw.dom){throw"Element.getAlignToXY with an element that doesn't exist"}aJ=aJ||[0,0];aI=(aI=="?"?"tl-bl?":(!/-/.test(aI)&&aI!=""?"tl-"+aI:aI||"tl-bl")).toLowerCase();var aS=this,aP=aS.dom,aU,aT,aB,aA,aD,aN,aG,aE=Ext.lib.Dom.getViewWidth(false,aV)-10,aO=Ext.lib.Dom.getViewHeight(false,aV)-10,E,ax,ay,az,aF,aH,aR=aV.documentElement,aC=aV.body,aM=(aR.scrollLeft||aC.scrollLeft||0)+5,aL=(aR.scrollTop||aC.scrollTop||0)+5,aQ=false,av="",A="",aK=aI.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!aK){throw"Element.getAlignToXY with an invalid alignment "+aI}av=aK[1];A=aK[2];aQ=!!aK[3];aU=aS.getAnchorXY(av,true);aT=aw.getAnchorXY(A,false);aB=aT[0]-aU[0]+aJ[0];aA=aT[1]-aU[1]+aJ[1];if(aQ){aD=aS.getWidth();aN=aS.getHeight();aG=aw.getRegion();E=av.charAt(0);ax=av.charAt(av.length-1);ay=A.charAt(0);az=A.charAt(A.length-1);aF=((E=="t"&&ay=="b")||(E=="b"&&ay=="t"));aH=((ax=="r"&&az=="l")||(ax=="l"&&az=="r"));if(aB+aD>aE+aM){aB=aH?aG.left-aD:aE+aM-aD}if(aB<aM){aB=aH?aG.right:aM}if(aA+aN>aO+aL){aA=aF?aG.top-aN:aO+aL-aN}if(aA<aL){aA=aF?aG.bottom:aL}}return[aB,aA]},adjustForConstraints:function(av,A,E){return this.getConstrainToXY(A||this.getDocument(),false,E,av)||av},getConstrainToXY:function(E,A,av,ax){var aw={top:0,left:0,bottom:0,right:0};return function(az,aM,aB,aD){var aQ=this.getDocument();az=Ext.get(az,aQ);aB=aB?Ext.applyIf(aB,aw):aw;var aL,aP,aK=0,aJ=0;if(az.dom==aQ.body||az.dom==aQ){aL=Ext.lib.Dom.getViewWidth(false,aQ);aP=Ext.lib.Dom.getViewHeight(false,aQ)}else{aL=az.dom.clientWidth;aP=az.dom.clientHeight;if(!aM){var aI=az.getXY();aK=aI[0];aJ=aI[1]}}var aH=az.getScroll();aK+=aB.left+aH.left;aJ+=aB.top+aH.top;aL-=aB.right;aP-=aB.bottom;var aN=aK+aL;var ay=aJ+aP;var aA=aD||(!aM?this.getXY():[this.getLeft(true),this.getTop(true)]);var aF=aA[0],aE=aA[1];var aG=this.dom.offsetWidth,aO=this.dom.offsetHeight;var aC=false;if((aF+aG)>aN){aF=aN-aG;aC=true}if((aE+aO)>ay){aE=ay-aO;aC=true}if(aF<aK){aF=aK;aC=true}if(aE<aJ){aE=aJ;aC=true}return aC?[aF,aE]:false}}(),getCenterXY:function(){return this.getAlignToXY(Ext.getBody(this.getDocument()),"c-c")},center:function(A){return this.alignTo(A||Ext.getBody(this.getDocument()),"c-c")},findParent:function(aA,az,E){var ax=this.dom,aw=this.getDocument(),A=aw.body,ay=0,av;if(Ext.isGecko&&h.call(ax)=="[object XULElement]"){return null}az=az||50;if(isNaN(az)){av=Ext.getDom(az,aw);az=Number.MAX_VALUE}while(ax&&ax.nodeType==1&&ay<az&&ax!=A&&ax!=av){if(Ext.DomQuery.is(ax,aA)){return E?Ext.get(ax,aw):ax}ay++;ax=ax.parentNode}return null},clip:function(){var A=this,E=A.dom;if(!au(E,v)){au(E,v,true);au(E,N,{o:A.getStyle(al),x:A.getStyle(J),y:A.getStyle(G)});A.setStyle(al,ao);A.setStyle(J,ao);A.setStyle(G,ao)}return A},unclip:function(){var A=this,av=A.dom;if(au(av,v)){au(av,v,false);var E=au(av,N);if(E.o){A.setStyle(al,E.o)}if(E.x){A.setStyle(J,E.x)}if(E.y){A.setStyle(G,E.y)}}return A}});Ext.isDefined(w.collectorThreadId)&&clearInterval(w.collectorThreadId);function l(){if(!Ext.enableGarbageCollector){clearInterval(w.collectorThreadId)}else{var A,aw,ax,av=Ext.elCache;for(A in av){aw=av[A].el;ax=aw.dom;if(Ext.isDocument(ax)||Ext.isWindow(ax)){continue}if(!ax||!ax.parentNode||(!ax.offsetParent&&!X.getElementById(A))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(ax)}delete av[A]}}if(Ext.isIE){var E={};for(A in av){E[A]=av[A]}Ext.elCache=Ext._documents[Ext.id(document)]=E;E=null}}}w.collectorThreadId=setInterval(l,30000);Ext.apply(P,{getDocument:function(av,aw){var ax=null;try{ax=Ext.getDom(av,null)}catch(E){}var A=Ext.isDocument(ax);if(A){if(aw){return Ext.isDocument(ax,aw)?ax:null}return ax}return ax?ax.ownerDocument||ax.document:null},docIsStrict:function(A){return(Ext.isDocument(A)?A:this.getDocument(A)).compatMode=="CSS1Compat"},getViewWidth:Ext.overload([P.getViewWidth||function(A){},function(){return this.getViewWidth(false)},function(A,E){return A?this.getDocumentWidth(E):this.getViewportWidth(E)}]),getViewHeight:Ext.overload([P.getViewHeight||function(A){},function(){return this.getViewHeight(false)},function(A,E){return A?this.getDocumentHeight(E):this.getViewportHeight(E)}]),getDocumentHeight:Ext.overload([P.getDocumentHeight||L,function(A){if(A=this.getDocument(A)){return Math.max(!this.docIsStrict(A)?A.body.scrollHeight:A.documentElement.scrollHeight,this.getViewportHeight(A))}return undefined}]),getDocumentWidth:Ext.overload([P.getDocumentWidth||L,function(A){if(A=this.getDocument(A)){return Math.max(!this.docIsStrict(A)?A.body.scrollWidth:A.documentElement.scrollWidth,this.getViewportWidth(A))}return undefined}]),getViewportHeight:Ext.overload([P.getViewportHeight||L,function(A){if(A=this.getDocument(A)){if(Ext.isIE){return this.docIsStrict(A)?A.documentElement.clientHeight:A.body.clientHeight}else{return A.defaultView.innerHeight}}return undefined}]),getViewportWidth:Ext.overload([P.getViewportWidth||L,function(A){if(A=this.getDocument(A)){return !this.docIsStrict(A)&&!Ext.isOpera?A.body.clientWidth:Ext.isIE?A.documentElement.clientWidth:A.defaultView.innerWidth}return undefined}]),getXY:Ext.overload([P.getXY||function(A){},function(aw,aF){aw=Ext.getDom(aw,aF);var A=this.getDocument(aw);var av,aA,aC,aE;var az=A?(A.body||A.documentElement):null;if(!aw||!az||aw==az){return[0,0]}if(aw.getBoundingClientRect){aC=aw.getBoundingClientRect();aE=aa(A).getScroll();return[aC.left+aE.left,aC.top+aE.top]}var aD=0,aB=0;av=aw;var E=aa(aw).getStyle("position")=="absolute";while(av){aD+=av.offsetLeft;aB+=av.offsetTop;if(!E&&aa(av).getStyle("position")=="absolute"){E=true}if(Ext.isGecko){aA=aa(av);var aG=parseInt(aA.getStyle("borderTopWidth"),10)||0;var ax=parseInt(aA.getStyle("borderLeftWidth"),10)||0;aD+=ax;aB+=aG;if(av!=aw&&aA.getStyle("overflow")!="visible"){aD+=ax;aB+=aG}}av=av.offsetParent}if(Ext.isSafari&&E){aD-=az.offsetLeft;aB-=az.offsetTop}if(Ext.isGecko&&!E){var ay=aa(az);aD+=parseInt(ay.getStyle("borderLeftWidth"),10)||0;aB+=parseInt(ay.getStyle("borderTopWidth"),10)||0}av=aw.parentNode;while(av&&av!=az){if(!Ext.isOpera||(av.tagName!="TR"&&aa(av).getStyle("display")!="inline")){aD-=av.scrollLeft;aB-=av.scrollTop}av=av.parentNode}return[aD,aB]}])});var an=P.getDocument,d=w._flyweights;Ext.fly=w.fly=function(av,A,aw){var E=null;A=A||"_global";if(av=Ext.getDom(av,aw)){(E=d[A]=(d[A]||new w.Flyweight())).dom=av;Ext.isDocument(av)&&(E._isDoc=true)}return E};var F=function(){};F.prototype=w.prototype;w.Flyweight=function(A){this.dom=A};w.Flyweight.prototype=new F();w.Flyweight.prototype.isFlyweight=true;(function(){var E,A=Ext.elCache;B(document);B(window);if(E=A._DOC){A[document.id].events=E.events;A[document.id].data=E.data;delete A._DOC}if(E=A._WINDOW){A[window.id].events=E.events;A[window.id].data=E.data;delete A._WINDOW}})();function f(av,aw,az,E,aB){av=Ext.getDom(av);if(!av){return}var A=Ext.get(av).id,aA=(V(av)[A]||{}).events||{},ax;ax=m.on(av,aw,E);aA[aw]=aA[aw]||[];aA[aw].push([az,E,aB,ax]);if(aw=="mousewheel"&&av.addEventListener){var ay=["DOMMouseScroll",E,false];av.addEventListener.apply(av,ay);Ext.EventManager.addListener(window,"unload",function(){av.removeEventListener.apply(av,ay)})}if(aw=="mousedown"&&av==X){Ext.EventManager.stoppedMouseDownEvent.addListener(E)}}function Q(A,E){return function(){var av=Ext.toArray(arguments);if(E.target==Ext.EventObject.setEvent(av[0]).target){A.apply(this,av)}}}function I(av,aw,E){E.task=new Ext.util.DelayedTask(av);var A=function(ax){E.task.delay(aw.buffer,av,null,[new Ext.EventObjectImpl(ax)])};return A}function ai(ax,aw,A,av,E){return function(ay){Ext.EventManager.removeListener(aw,A,av,E);ax(ay)}}function ap(E,av,A){return function(ax){var aw=new Ext.util.DelayedTask(E);if(!A.tasks){A.tasks=[]}A.tasks.push(aw);aw.delay(av.delay||10,E,null,[new Ext.EventObjectImpl(ax)])}}function Z(av,E,A,az,ay){var aA=!Ext.isObject(A)?{}:A,ax=Ext.getDom(av);az=az||aA.fn;ay=ay||aA.scope;if(!ax){throw'Error listening for "'+E+'". Element "'+av+"\" doesn't exist."}function aw(aC){if(!Ext){return}aC=Ext.EventObject.setEvent(aC);var aB;if(aA.delegate){if(!(aB=aC.getTarget(aA.delegate,ax))){return}}else{aB=aC.target}if(aA.stopEvent){aC.stopEvent()}if(aA.preventDefault){aC.preventDefault()}if(aA.stopPropagation){aC.stopPropagation()}if(aA.normalized){aC=aC.browserEvent}az.call(ay||ax,aC,aB,aA)}if(aA.target){aw=Q(aw,aA)}if(aA.delay){aw=ap(aw,aA,az)}if(aA.single){aw=ai(aw,ax,E,az,ay)}if(aA.buffer){aw=I(aw,aA,az)}f(ax,E,az,aw,ay);return aw}Ext.apply(y,{addListener:y.on=function(av,A,ax,aw,E){if(Ext.isObject(A)){var aA=A,ay,az;for(ay in aA){az=aA[ay];if(!z.test(ay)){if(Ext.isFunction(az)){Z(av,ay,aA,az,aA.scope)}else{Z(av,ay,az)}}}}else{Z(av,A,E,ax,aw)}},removeListener:y.un=function(az,aA,aC,aE){var av=Ext.getDom(az);av&&Ext.get(av);var aD=av?V(av):{},aB=av&&((aD[av.id]||{events:{}}).events)[aA]||[],A,ay,aw,ax,E;for(ay=0,len=aB.length;ay<len;ay++){if(Ext.isArray(aB[ay])&&aB[ay][0]==aC&&(!aE||aB[ay][2]==aE)){if(aC.task){aC.task.cancel();delete aC.task}ax=aC.tasks&&aC.tasks.length;if(ax){while(ax--){aC.tasks[ax].cancel()}delete aC.tasks}E=A=aB[ay][1];if(m.extAdapter){E=aB[ay][3]}m.un(av,aA,E);aB.splice(ay,1);if(aB.length===0){delete aD[av.id].events[aA]}for(ax in aD[av.id].events){return false}aD[av.id].events={};return false}}if(aA=="mousewheel"&&av.addEventListener&&A){av.removeEventListener("DOMMouseScroll",A,false)}if(aA=="mousedown"&&av==X&&A){Ext.EventManager.stoppedMouseDownEvent.removeListener(A)}},removeAll:function(E){E=Ext.getDom(E);if(!E){return}var A=E.id,aC=V(E)||{},aD=aC[A]||{},aB=aD.events||{},ay,ax,az,av,aA,aw;for(av in aB){if(aB.hasOwnProperty(av)){ay=aB[av];for(ax=0,az=ay.length;ax<az;ax++){aA=ay[ax][0];if(aA.task){aA.task.cancel();delete aA.task}if(aA.tasks&&(aw=aA.tasks.length)){while(aw--){aA.tasks[aw].cancel()}delete aA.tasks}m.un(E,av,m.extAdapter?ay[ax][3]:ay[ax][1])}}}aC[A]&&(aC[A].events={})},getListeners:function(av,E){av=Ext.getDom(av);if(!av){return}var ax=(Ext.get(av)||{}).id,A=V(av),aw=(A[ax]||{}).events||{};return aw[E]||null},purgeElement:function(av,A,ax){av=Ext.getDom(av);var E=av.id,aA=V(av),aB=(aA[E]||{}).events||{},aw,az,ay;if(ax){if(aB.hasOwnProperty(ax)){az=aB[ax];for(aw=0,ay=az.length;aw<ay;aw++){Ext.EventManager.removeListener(av,ax,az[aw][0])}}}else{Ext.EventManager.removeAll(av)}if(A&&av&&av.childNodes){for(aw=0,ay=av.childNodes.length;aw<ay;aw++){Ext.EventManager.purgeElement(av.childNodes[aw],A,ax)}}}});m.getListeners=function(E,A){return Ext.EventManager.getListeners(E,A)};Ext.provide&&Ext.provide("multidom")})();(function(){var El=Ext.Element,ElFrame,ELD=Ext.lib.Dom,EMPTYFN=function(){},OP=Object.prototype,addListener=function(){var handler;if(window.addEventListener){handler=function F(el,eventName,fn,capture){el.addEventListener(eventName,fn,!!capture)}}else{if(window.attachEvent){handler=function F(el,eventName,fn,capture){el.attachEvent("on"+eventName,fn)}}else{handler=function F(){}}}var F=null;return handler}(),removeListener=function(){var handler;if(window.removeEventListener){handler=function F(el,eventName,fn,capture){el.removeEventListener(eventName,fn,(capture))}}else{if(window.detachEvent){handler=function F(el,eventName,fn){el.detachEvent("on"+eventName,fn)}}else{handler=function F(){}}}var F=null;return handler}();if(typeof ELD.getDocument!="function"){throw"MIF 2.1 requires multidom support"}if(!Ext.isDefined(Ext.elCache)){throw"MIF 2.1 requires Ext 3.1 or higher."}Ext.ns("Ext.ux.ManagedIFrame","Ext.ux.plugin");var MIM,MIF=Ext.ux.ManagedIFrame,MIFC;var frameEvents=["documentloaded","domready","focus","blur","resize","scroll","unload","scroll","exception","message","reset"];var reSynthEvents=new RegExp("^("+frameEvents.join("|")+")","i");Ext.ux.ManagedIFrame.Element=Ext.extend(Ext.Element,{constructor:function(element,forceNew,doc){var d=doc||document;var elCache=ELD.resolveDocumentCache(d);var dom=Ext.getDom(element,d);if(!dom||!(/^(iframe|frame)/i).test(dom.tagName)){return null}var id=Ext.id(dom);this.dom=dom;this.id=id;(elCache[id]||(elCache[id]={el:this,events:{},data:{}})).el=this;this.dom.name||(this.dom.name=this.id);if(Ext.isIE){document.frames&&(document.frames[this.dom.name]||(document.frames[this.dom.name]=this.dom))}this.dom.ownerCt=this;MIM.register(this);if(!this._observable){(this._observable=new Ext.util.Observable()).addEvents("documentloaded","domready","exception","resize","message","blur","focus","unload","scroll","reset");this._observable.addEvents("_docready","_docload")}this.dom[Ext.isIE?"onreadystatechange":"onload"]=this.dom.onerror=this.loadHandler.createDelegate(this)},destructor:function(){this.dom[Ext.isIE?"onreadystatechange":"onload"]=this.dom.onerror=EMPTYFN;MIM.deRegister(this);this.removeAllListeners();Ext.destroy(this.frameShim,this.DDM);this.hideMask(true);delete this.loadMask;this.reset();this.manager=null;this.dom.ownerCt=null},cleanse:function(forceReclean,deep){if(this.isCleansed&&forceReclean!==true){return this}var d=this.dom,n=d.firstChild,nx;while(d&&n){nx=n.nextSibling;deep&&Ext.fly(n).cleanse(forceReclean,deep);Ext.removeNode(n);n=nx}this.isCleansed=true;return this},src:null,CSS:null,manager:null,disableMessaging:true,domReadyRetries:7500,focusOnLoad:Ext.isIE,eventsFollowFrameLinks:true,_domCache:null,remove:function(){this.destructor.apply(this,arguments);ElFrame.superclass.remove.apply(this,arguments)},getDocument:function(){return this.dom?this.dom.ownerDocument:document},submitAsTarget:function(submitCfg){var opt=submitCfg||{},D=this.getDocument(),form=Ext.getDom(opt.form?opt.form.form||opt.form:null,D)||Ext.DomHelper.append(D.body,{tag:"form",cls:"x-hidden x-mif-form",encoding:"multipart/form-data"}),formFly=Ext.fly(form,"_dynaForm"),formState={target:form.target||"",method:form.method||"",encoding:form.encoding||"",enctype:form.enctype||"",action:form.action||""},encoding=opt.encoding||form.encoding,method=opt.method||form.method||"POST";formFly.set({target:this.dom.name,method:method,encoding:encoding,action:opt.url||opt.action||form.action});if(method=="POST"||!!opt.enctype){formFly.set({enctype:opt.enctype||form.enctype||encoding})}var hiddens,hd,ps;if(opt.params&&(ps=Ext.isFunction(opt.params)?opt.params():opt.params)){hiddens=[];Ext.iterate(ps=typeof ps=="string"?Ext.urlDecode(ps,false):ps,function(n,v){Ext.fly(hd=D.createElement("input")).set({type:"hidden",name:n,value:v});form.appendChild(hd);hiddens.push(hd)})}opt.callback&&this._observable.addListener("_docready",opt.callback,opt.scope,{single:true});this._frameAction=true;this._targetURI=location.href;this.showMask();(function(){form.submit();hiddens&&Ext.each(hiddens,Ext.removeNode,Ext);if(formFly.hasClass("x-mif-form")){formFly.remove()}else{formFly.set(formState)}delete El._flyweights._dynaForm;formFly=null;this.hideMask(true)}).defer(100,this);return this},resetUrl:(function(){return Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank"})(),setSrc:function(url,discardUrl,callback,scope){var src=url||this.src||this.resetUrl;var O=this._observable;this._unHook();Ext.isFunction(callback)&&O.addListener("_docload",callback,scope||this,{single:true});this.showMask();(discardUrl!==true)&&(this.src=src);var s=this._targetURI=(Ext.isFunction(src)?src()||"":src);try{this._frameAction=true;this.dom.src=s;this.checkDOM()}catch(ex){O.fireEvent.call(O,"exception",this,ex)}return this},setLocation:function(url,discardUrl,callback,scope){var src=url||this.src||this.resetUrl;var O=this._observable;this._unHook();Ext.isFunction(callback)&&O.addListener("_docload",callback,scope||this,{single:true});this.showMask();var s=this._targetURI=(Ext.isFunction(src)?src()||"":src);if(discardUrl!==true){this.src=src}try{this._frameAction=true;this.getWindow().location.replace(s);this.checkDOM()}catch(ex){O.fireEvent.call(O,"exception",this,ex)}return this},reset:function(src,callback,scope){this._unHook();var loadMaskOff=false;var s=src,win=this.getWindow();if(this.loadMask){loadMaskOff=this.loadMask.disabled;this.loadMask.disabled=false}this.hideMask(true);if(win){this.isReset=true;var cb=callback;this._observable.addListener("_docload",function(frame){if(this.loadMask){this.loadMask.disabled=loadMaskOff}Ext.isFunction(cb)&&(cb=cb.apply(scope||this,arguments));this._observable.fireEvent("reset",this)},this,{single:true});Ext.isFunction(s)&&(s=src());s=this._targetURI=Ext.isEmpty(s,true)?this.resetUrl:s;win.location.href=s}return this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(content,loadScripts,callback,scope){loadScripts=loadScripts||this.getUpdater().loadScripts||false;content=Ext.DomHelper.markup(content||"");content=loadScripts===true?content:content.replace(this.scriptRE,"");var doc;if((doc=this.getFrameDocument())&&!!content.length){this._unHook();this.src=null;this.showMask();Ext.isFunction(callback)&&this._observable.addListener("_docload",callback,scope||this,{single:true});this._targetURI=location.href;doc.open();this._frameAction=true;doc.write(content);doc.close();this.checkDOM()}else{this.hideMask(true);Ext.isFunction(callback)&&callback.call(scope,this)}return this},execCommand:function(command,userInterface,value,validate){var doc,assert;if((doc=this.getFrameDocument())&&!!command){try{Ext.isIE&&this.getWindow().focus();assert=validate&&Ext.isFunction(doc.queryCommandEnabled)?doc.queryCommandEnabled(command):true;return assert&&doc.execCommand(command,!!userInterface,value)}catch(eex){return false}}return false},setDesignMode:function(active){var doc;(doc=this.getFrameDocument())&&(doc.designMode=(/on|true/i).test(String(active))?"on":"off")},getUpdater:function(){return this.updateManager||(this.updateManager=new MIF.Updater(this))},getHistory:function(){var h=null;try{h=this.getWindow().history}catch(eh){}return h},get:function(el){var doc=this.getFrameDocument();return doc?Ext.get(el,doc):doc=null},fly:function(el,named){var doc=this.getFrameDocument();return doc?Ext.fly(el,named,doc):null},getDom:function(el){var d;if(!el||!(d=this.getFrameDocument())){return(d=null)}return Ext.getDom(el,d)},select:function(selector,unique){var d;return(d=this.getFrameDocument())?Ext.Element.select(selector,unique,d):d=null},query:function(selector){var d;return(d=this.getFrameDocument())?Ext.DomQuery.select(selector,d):null},removeNode:Ext.removeNode,_renderHook:function(){this._windowContext=null;this.CSS=this.CSS?this.CSS.destroy():null;this._hooked=false;try{if(this.writeScript('(function(){(window.hostMIF = parent.document.getElementById("'+this.id+'").ownerCt)._windowContext='+(Ext.isIE?"window":'{eval:function(s){return new Function("return ("+s+")")();}}')+";})()")){var w,p=this._frameProxy,D=this.getFrameDocument();if(w=this.getWindow()){p||(p=this._frameProxy=this._eventProxy.createDelegate(this));addListener(w,"focus",p);addListener(w,"blur",p);addListener(w,"resize",p);addListener(w,"unload",p);D&&addListener(Ext.isIE?w:D,"scroll",p)}D&&(this.CSS=new Ext.ux.ManagedIFrame.CSS(D))}}catch(ex){}return this.domWritable()},_unHook:function(){if(this._hooked){var id,el,c=this._domCache;if(c){for(id in c){el=c[id].el;el&&el.removeAllListeners&&el.removeAllListeners();el&&(c[id].el=el=null);delete c[id].data;delete c[id]}}this._windowContext&&(this._windowContext.hostMIF=null);this._windowContext=null;var w,p=this._frameProxy;if(p&&this.domWritable()&&(w=this.getWindow())){removeListener(w,"focus",p);removeListener(w,"blur",p);removeListener(w,"resize",p);removeListener(w,"unload",p);removeListener(Ext.isIE?w:this.getFrameDocument(),"scroll",p)}}MIM._flyweights={};this._domCache=null;ELD.clearDocumentCache&&ELD.clearDocumentCache(this.id);this.CSS=this.CSS?this.CSS.destroy():null;this.domFired=this._frameAction=this.domReady=this._hooked=false},_windowContext:null,getFrameDocument:function(){var win=this.getWindow(),doc=null;try{doc=(Ext.isIE&&win?win.document:null)||this.dom.contentDocument||window.frames[this.dom.name].document||null}catch(gdEx){this._domCache=null;ELD.clearDocumentCache&&ELD.clearDocumentCache(this.id);return false}doc=(doc&&Ext.isFunction(ELD.getDocument))?ELD.getDocument(doc,true):doc;if(doc){this._domCache||(this._domCache=ELD.resolveDocumentCache(doc,this.id))}return doc},getDoc:function(){var D=this.getFrameDocument();return Ext.get(D,D)},getBody:function(){var d;return(d=this.getFrameDocument())?this.get(d.body||d.documentElement):null},getDocumentURI:function(){var URI,d;try{URI=this.src&&(d=this.getFrameDocument())?d.location.href:null}catch(ex){}return URI||(Ext.isFunction(this.src)?this.src():this.src)},getWindowURI:function(){var URI,w;try{URI=(w=this.getWindow())?w.location.href:null}catch(ex){}return URI||(Ext.isFunction(this.src)?this.src():this.src)},getWindow:function(){var dom=this.dom,win=null;try{win=dom.contentWindow||window.frames[dom.name]||null}catch(gwEx){}return win},scrollChildIntoView:function(child,container,hscroll){this.fly(child,"_scrollChildIntoView").scrollIntoView(this.getDom(container)||this.getBody().dom,hscroll);return this},print:function(){try{var win;if(win=this.getWindow()){Ext.isIE&&win.focus();win.print()}}catch(ex){throw new MIF.Error("printexception",ex.description||ex.message||ex)}return this},domWritable:function(){return !!Ext.isDocument(this.getFrameDocument(),true)&&!!this._windowContext},execScript:function(block,useDOM){try{if(this.domWritable()){if(useDOM){this.writeScript(block)}else{return this._windowContext.eval(block)}}else{throw new MIF.Error("execscript-secure-context")}}catch(ex){this._observable.fireEvent.call(this._observable,"exception",this,ex);return false}return true},writeScript:function(block,attributes){attributes=Ext.apply({},attributes||{},{type:"text/javascript",text:block});try{var head,script,doc=this.getFrameDocument();if(doc&&typeof doc.getElementsByTagName!="undefined"){if(!(head=doc.getElementsByTagName("head")[0])){head=doc.createElement("head");doc.getElementsByTagName("html")[0].appendChild(head)}if(head&&(script=doc.createElement("script"))){for(var attrib in attributes){if(attributes.hasOwnProperty(attrib)&&attrib in script){script[attrib]=attributes[attrib]}}return !!head.appendChild(script)}}}catch(ex){this._observable.fireEvent.call(this._observable,"exception",this,ex)}finally{script=head=null}return false},loadFunction:function(fn,useDOM,invokeIt){var name=fn.name||fn;var fnSrc=fn.fn||window[fn];name&&fnSrc&&this.execScript(name+"="+fnSrc,useDOM);invokeIt&&this.execScript(name+"()")},loadHandler:function(e,target){var rstatus=(e&&typeof e.type!=="undefined"?e.type:this.dom.readyState);if(this.eventsFollowFrameLinks||this._frameAction||this.isReset){switch(rstatus){case"domready":case"DOMFrameContentLoaded":case"domfail":this._onDocReady(rstatus);break;case"load":case"complete":this._onDocLoaded(rstatus);break;case"error":this._observable.fireEvent.apply(this._observable,["exception",this].concat(arguments));break;default:}}this.frameState=rstatus},_onDocReady:function(eventName){var w,obv=this._observable,D;if(!this.isReset&&this.focusOnLoad&&(w=this.getWindow())){w.focus()}obv.fireEvent("_docready",this);(D=this.getDoc())&&(D.isReady=true);if(!this.domFired&&(this._hooked=this._renderHook())){this.domFired=true;this.isReset||obv.fireEvent.call(obv,"domready",this)}this.domReady=true;this.hideMask()},_onDocLoaded:function(eventName){var obv=this._observable,w;this.domReady||this._onDocReady("domready");obv.fireEvent("_docload",this);this.isReset||obv.fireEvent("documentloaded",this);this.hideMask(true);this._frameAction=this.isReset=false},checkDOM:function(win){if(Ext.isGecko){return}var n=0,frame=this,domReady=false,b,l,d,max=this.domReadyRetries||2500,polling=false,startLocation=(this.getFrameDocument()||{location:{}}).location.href;(function(){d=frame.getFrameDocument()||{location:{}};polling=(d.location.href!==startLocation||d.location.href===frame._targetURI);if(frame.domReady){return}domReady=polling&&((b=frame.getBody())&&!!(b.dom.innerHTML||"").length)||false;if(d.location.href&&!domReady&&(++n<max)){setTimeout(arguments.callee,2);return}frame.loadHandler({type:domReady?"domready":"domfail"})})()},filterEventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,addListener:function(eventName,fn,scope,options){if(typeof eventName=="object"){var o=eventName;for(var e in o){if(this.filterEventOptionsRe.test(e)){continue}if(typeof o[e]=="function"){this.addListener(e,o[e],o.scope,o)}else{this.addListener(e,o[e].fn,o[e].scope,o[e])}}return}if(reSynthEvents.test(eventName)){var O=this._observable;if(O){O.events[eventName]||(O.addEvents(eventName));O.addListener.call(O,eventName,fn,scope||this,options)}}else{ElFrame.superclass.addListener.call(this,eventName,fn,scope||this,options)}return this},removeListener:function(eventName,fn,scope){var O=this._observable;if(reSynthEvents.test(eventName)){O&&O.removeListener.call(O,eventName,fn,scope||this,options)}else{ElFrame.superclass.removeListener.call(this,eventName,fn,scope||this)}return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);var O=this._observable;O&&O.purgeListeners.call(this._observable);return this},showMask:function(msg,msgCls,maskCls){var lmask=this.loadMask;if(lmask&&!lmask.disabled){this.mask(msg||lmask.msg,msgCls||lmask.msgCls,maskCls||lmask.maskCls,lmask.maskEl)}},hideMask:function(forced){var tlm=this.loadMask||{};if(forced||(tlm.hideOnReady&&this.domReady)){this.unmask()}},mask:function(msg,msgCls,maskCls,maskEl){this._mask&&this.unmask();var p=Ext.get(maskEl)||this.parent(".ux-mif-mask-target")||this.parent();if(p.getStyle("position")=="static"&&!p.select("iframe,frame,object,embed").elements.length){p.addClass("x-masked-relative")}p.addClass("x-masked");this._mask=Ext.DomHelper.append(p,{cls:maskCls||"ux-mif-el-mask"},true);this._mask.setDisplayed(true);this._mask._agent=p;if(typeof msg=="string"){this._maskMsg=Ext.DomHelper.append(p,{cls:msgCls||"ux-mif-el-mask-msg",style:{visibility:"hidden"},cn:{tag:"div",html:msg}},true);this._maskMsg.setVisibilityMode(Ext.Element.VISIBILITY).center(p).setVisible(true)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&this.getStyle("height")=="auto"){this._mask.setSize(undefined,this._mask.getHeight())}return this._mask},unmask:function(){var a;if(this._mask){(a=this._mask._agent)&&a.removeClass(["x-masked-relative","x-masked"]);if(this._maskMsg){this._maskMsg.remove();delete this._maskMsg}this._mask.remove();delete this._mask}},createFrameShim:function(imgUrl,shimCls){this.shimCls=shimCls||this.shimCls||"ux-mif-shim";this.frameShim||(this.frameShim=this.next("."+this.shimCls)||Ext.DomHelper.append(this.dom.parentNode,{tag:"img",src:imgUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"},true));this.frameShim&&(this.frameShim.autoBoxAdjust=false);return this.frameShim},toggleShim:function(show){var shim=this.frameShim||this.createFrameShim();var cls=this.shimCls+"-on";!show&&shim.removeClass(cls);show&&!shim.hasClass(cls)&&shim.addClass(cls)},load:function(loadCfg){var um;if(um=this.getUpdater()){if(loadCfg&&loadCfg.renderer){um.setRenderer(loadCfg.renderer);delete loadCfg.renderer}um.update.apply(um,arguments)}return this},_eventProxy:function(e){if(!e){return}e=Ext.EventObject.setEvent(e);var be=e.browserEvent||e,er,args=[e.type,this];if(!be.eventPhase||(be.eventPhase==(be.AT_TARGET||2))){if(e.type=="resize"){var doc=this.getFrameDocument();doc&&(args.push({height:ELD.getDocumentHeight(doc),width:ELD.getDocumentWidth(doc)},{height:ELD.getViewportHeight(doc),width:ELD.getViewportWidth(doc)},{height:ELD.getViewHeight(false,doc),width:ELD.getViewWidth(false,doc)}))}er=this._observable?this._observable.fireEvent.apply(this._observable,args.concat(Array.prototype.slice.call(arguments,0))):null;(e.type=="unload")&&this._unHook()}return er},sendMessage:function(message,tag,origin){},postMessage:function(message,ports,origin){}});ElFrame=Ext.Element.IFRAME=Ext.Element.FRAME=Ext.ux.ManagedIFrame.Element;var fp=ElFrame.prototype;Ext.override(ElFrame,{on:fp.addListener,un:fp.removeListener,getUpdateManager:fp.getUpdater});Ext.ux.ManagedIFrame.ComponentAdapter=function(){};Ext.ux.ManagedIFrame.ComponentAdapter.prototype={version:2.01,defaultSrc:null,title:"&#160;",unsupportedText:"Inline frames are NOT enabled/supported by your browser.",hideMode:!Ext.isIE&&!!Ext.ux.plugin.VisibilityMode?"nosize":"display",animCollapse:Ext.isIE,animFloat:Ext.isIE,frameConfig:null,focusOnLoad:false,frameEl:null,useShim:false,autoScroll:true,autoLoad:null,getId:function(){return this.id||(this.id="mif-comp-"+(++Ext.Component.AUTO_ID))},stateEvents:["documentloaded"],stateful:false,setAutoScroll:function(auto){var scroll=Ext.value(auto,this.autoScroll===true);this.rendered&&this.getFrame()&&this.frameEl.setOverflow((this.autoScroll=scroll)?"auto":"hidden");return this},getContentTarget:function(){return this.getFrame()},getFrame:function(){if(this.rendered){if(this.frameEl){return this.frameEl}var f=this.items&&this.items.first?this.items.first():null;f&&(this.frameEl=f.frameEl);return this.frameEl}return null},getFrameWindow:function(){return this.getFrame()?this.frameEl.getWindow():null},getFrameDocument:function(){return this.getFrame()?this.frameEl.getFrameDocument():null},getFrameDoc:function(){return this.getFrame()?this.frameEl.getDoc():null},getFrameBody:function(){return this.getFrame()?this.frameEl.getBody():null},resetFrame:function(){this.getFrame()&&this.frameEl.reset.apply(this.frameEl,arguments);return this},submitAsTarget:function(submitCfg){this.getFrame()&&this.frameEl.submitAsTarget.apply(this.frameEl,arguments);return this},load:function(loadCfg){if(loadCfg&&this.getFrame()){var args=arguments;this.resetFrame(null,function(){loadCfg.submitAsTarget?this.submitAsTarget.apply(this,args):this.frameEl.load.apply(this.frameEl,args)},this)}this.autoLoad=loadCfg;return this},doAutoLoad:function(){this.autoLoad&&this.load(typeof this.autoLoad=="object"?this.autoLoad:{url:this.autoLoad})},getUpdater:function(){return this.getFrame()?this.frameEl.getUpdater():null},setSrc:function(url,discardUrl,callback,scope){this.getFrame()&&this.frameEl.setSrc.apply(this.frameEl,arguments);return this},setLocation:function(url,discardUrl,callback,scope){this.getFrame()&&this.frameEl.setLocation.apply(this.frameEl,arguments);return this},getState:function(){var URI=this.getFrame()?this.frameEl.getDocumentURI()||null:null;var state=this.supr().getState.call(this);state=Ext.apply(state||{},{defaultSrc:Ext.isFunction(URI)?URI():URI,autoLoad:this.autoLoad});return state},setMIFEvents:function(){this.addEvents("documentloaded","domready","exception","message","blur","focus","scroll","resize","unload","reset")},sendMessage:function(message,tag,origin){},onAdd:function(C){C.relayTarget&&this.suspendEvents(true)},initRef:function(){if(this.ref){var t=this,levels=this.ref.split("/"),l=levels.length,i;for(i=0;i<l;i++){if(t.ownerCt){t=t.ownerCt}}this.refName=levels[--i];t[this.refName]||(t[this.refName]=this);this.refOwner=t}}};Ext.ux.ManagedIFrame.Component=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.ManagedIFrame.Component",initComponent:function(){var C={monitorResize:this.monitorResize||(this.monitorResize=!!this.fitToParent),plugins:(this.plugins||[]).concat(this.hideMode==="nosize"&&Ext.ux.plugin.VisibilityMode?[new Ext.ux.plugin.VisibilityMode({hideMode:"nosize",elements:["bwrap"]})]:[])};MIF.Component.superclass.initComponent.call(Ext.apply(this,Ext.apply(this.initialConfig,C)));this.setMIFEvents()},onRender:function(ct,position){var frCfg=this.frameCfg||this.frameConfig||(this.relayTarget?{name:this.relayTarget.id}:{})||{};var frDOM=frCfg.autoCreate||frCfg;frDOM=Ext.apply({tag:"iframe",id:Ext.id()},frDOM);var el=Ext.getDom(this.el);(el&&el.tagName=="iframe")||(this.autoEl=Ext.apply({name:frDOM.id,frameborder:0},frDOM));MIF.Component.superclass.onRender.apply(this,arguments);if(this.unsupportedText){ct.child("noframes")||ct.createChild({tag:"noframes",html:this.unsupportedText||null})}var frame=this.el;var F;if(F=this.frameEl=(this.el?new MIF.Element(this.el.dom,true):null)){(F.ownerCt=(this.relayTarget||this)).frameEl=F;F.addClass("ux-mif");if(this.loadMask){var mEl=this.loadMask.maskEl;F.loadMask=Ext.apply({disabled:false,hideOnReady:false,msgCls:"ext-el-mask-msg x-mask-loading",maskCls:"ext-el-mask"},{maskEl:F.ownerCt[String(mEl)]||F.parent("."+String(mEl))||F.parent(".ux-mif-mask-target")||mEl},Ext.isString(this.loadMask)?{msg:this.loadMask}:this.loadMask);Ext.get(F.loadMask.maskEl)&&Ext.get(F.loadMask.maskEl).addClass("ux-mif-mask-target")}F.disableMessaging=Ext.value(frCfg.disableMessaging,true);F._observable&&(this.relayTarget||this).relayEvents(F._observable,frameEvents.concat(this._msgTagHandlers||[]));delete this.contentEl}},afterRender:function(container){MIF.Component.superclass.afterRender.apply(this,arguments);if(this.fitToParent&&!this.ownerCt){var pos=this.getPosition(),size=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(size.width-pos[0],size.height-pos[1])}this.getEl().setOverflow("hidden");this.setAutoScroll();var F;if(F=this.frameEl){var ownerCt=this.ownerCt;while(ownerCt){ownerCt.on("afterlayout",function(container,layout){Ext.each(["north","south","east","west"],function(region){var reg;if((reg=layout[region])&&reg.split&&reg.split.dd&&!reg._splitTrapped){reg.split.dd.endDrag=reg.split.dd.endDrag.createSequence(MIM.hideShims,MIM);reg.split.on("beforeresize",MIM.showShims,MIM);reg._splitTrapped=MIM._splitTrapped=true}},this)},this,{single:true});ownerCt=ownerCt.ownerCt}if(!!this.ownerCt||this.useShim){this.frameShim=F.createFrameShim()}this.getUpdater().showLoadIndicator=this.showLoadIndicator||false;var resumeEvents=this.relayTarget&&this.ownerCt?this.ownerCt.resumeEvents.createDelegate(this.ownerCt):null;if(this.autoload){this.doAutoLoad()}else{if(this.frameMarkup||this.html){F.update(this.frameMarkup||this.html,true,resumeEvents);delete this.html;delete this.frameMarkup;return}else{if(this.defaultSrc){F.setSrc(this.defaultSrc,false)}else{F.reset(null,resumeEvents);return}}}resumeEvents&&resumeEvents()}},beforeDestroy:function(){this.setVisible(false);var F;if(F=this.getFrame()){F.hide();F.remove();this.frameEl=this.frameShim=null}this.relayTarget&&(this.relayTarget.frameEl=null);MIF.Component.superclass.beforeDestroy.call(this)}});Ext.override(MIF.Component,MIF.ComponentAdapter.prototype);Ext.reg("mif",MIF.Component);function embed_MIF(config){config||(config={});config.layout="fit";config.items={xtype:"mif",ref:"mifChild",useShim:true,autoScroll:Ext.value(config.autoScroll,this.autoScroll),defaultSrc:Ext.value(config.defaultSrc,this.defaultSrc),frameMarkup:Ext.value(config.html,this.html),loadMask:Ext.value(config.loadMask,this.loadMask),focusOnLoad:Ext.value(config.focusOnLoad,this.focusOnLoad),frameConfig:Ext.value(config.frameConfig||config.frameCfg,this.frameConfig),relayTarget:this};delete config.html;this.setMIFEvents();return config}Ext.ux.ManagedIFrame.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.ManagedIFrame.Panel",bodyCssClass:"ux-mif-mask-target",constructor:function(config){MIF.Panel.superclass.constructor.call(this,embed_MIF.call(this,config))}});Ext.override(MIF.Panel,MIF.ComponentAdapter.prototype);Ext.reg("iframepanel",MIF.Panel);Ext.ux.ManagedIFrame.Portlet=Ext.extend(Ext.ux.ManagedIFrame.Panel,{ctype:"Ext.ux.ManagedIFrame.Portlet",anchor:"100%",frame:true,collapseEl:"bwrap",collapsible:true,draggable:true,cls:"x-portlet"});Ext.reg("iframeportlet",MIF.Portlet);Ext.ux.ManagedIFrame.Window=Ext.extend(Ext.Window,{ctype:"Ext.ux.ManagedIFrame.Window",bodyCssClass:"ux-mif-mask-target",constructor:function(config){MIF.Window.superclass.constructor.call(this,embed_MIF.call(this,config))}});Ext.override(MIF.Window,MIF.ComponentAdapter.prototype);Ext.reg("iframewindow",MIF.Window);Ext.ux.ManagedIFrame.Updater=Ext.extend(Ext.Updater,{showLoading:function(){this.showLoadIndicator&&this.el&&this.el.mask(this.indicatorText)},hideLoading:function(){this.showLoadIndicator&&this.el&&this.el.unmask()},updateComplete:function(response){MIF.Updater.superclass.updateComplete.apply(this,arguments);this.hideLoading()},processFailure:function(response){MIF.Updater.superclass.processFailure.apply(this,arguments);this.hideLoading()}});var styleCamelRe=/(-[a-z])/gi;var styleCamelFn=function(m,a){return a.charAt(1).toUpperCase()};Ext.ux.ManagedIFrame.CSS=function(hostDocument){var doc;if(hostDocument){doc=hostDocument;return{rules:null,destroy:function(){return doc=null},createStyleSheet:function(cssText,id){var ss;if(!doc){return}var head=doc.getElementsByTagName("head")[0];var rules=doc.createElement("style");rules.setAttribute("type","text/css");Ext.isString(id)&&rules.setAttribute("id",id);if(Ext.isIE){head.appendChild(rules);ss=rules.styleSheet;ss.cssText=cssText}else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules);ss=rules.styleSheet?rules.styleSheet:(rules.sheet||doc.styleSheets[doc.styleSheets.length-1])}this.cacheStyleSheet(ss);return ss},removeStyleSheet:function(id){if(!doc||!id){return}var existing=doc.getElementById(id);if(existing){existing.parentNode.removeChild(existing)}},swapStyleSheet:function(id,url){if(!doc){return}this.removeStyleSheet(id);var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet");ss.setAttribute("type","text/css");Ext.isString(id)&&ss.setAttribute("id",id);ss.setAttribute("href",url);doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(ss,media){this.rules||(this.rules={});try{Ext.each(ss.cssRules||ss.rules||[],function(rule){this.hashRule(rule,ss,media)},this);Ext.each(ss.imports||[],function(sheet){sheet&&this.cacheStyleSheet(sheet,this.resolveMedia([sheet,sheet.parentStyleSheet]))},this)}catch(e){}},hashRule:function(rule,sheet,mediaOverride){var mediaSelector=mediaOverride||this.resolveMedia(rule);if(rule.cssRules||rule.rules){this.cacheStyleSheet(rule,this.resolveMedia([rule,rule.parentRule]))}if(rule.styleSheet){this.cacheStyleSheet(rule.styleSheet,this.resolveMedia([rule,rule.ownerRule,rule.parentStyleSheet]))}rule.selectorText&&Ext.each((mediaSelector||"").split(","),function(media){this.rules[((media?media.trim()+":":"")+rule.selectorText).toLowerCase()]=rule},this)},resolveMedia:function(rule){var media;Ext.each([].concat(rule),function(r){if(r&&r.media&&r.media.length){media=r.media;return false}});return media?(Ext.isIE?String(media):media.mediaText):""},getRules:function(refreshCache){if(!this.rules||refreshCache){this.rules={};if(doc){var ds=doc.styleSheets;for(var i=0,len=ds.length;i<len;i++){try{this.cacheStyleSheet(ds[i])}catch(e){}}}}return this.rules},getRule:function(selector,refreshCache,mediaSelector){var rs=this.getRules(refreshCache);if(Ext.type(mediaSelector)=="string"){mediaSelector=mediaSelector.trim()+":"}else{mediaSelector=""}if(!Ext.isArray(selector)){return rs[(mediaSelector+selector).toLowerCase()]}var select;for(var i=0;i<selector.length;i++){select=(mediaSelector+selector[i]).toLowerCase();if(rs[select]){return rs[select]}}return null},updateRule:function(selector,property,value,mediaSelector){Ext.each((mediaSelector||"").split(","),function(mediaSelect){if(!Ext.isArray(selector)){var rule=this.getRule(selector,false,mediaSelect);if(rule){rule.style[property.replace(camelRe,camelFn)]=value;return true}}else{for(var i=0;i<selector.length;i++){if(this.updateRule(selector[i],property,value,mediaSelect)){return true}}}return false},this)}}}};Ext.ux.ManagedIFrame.Manager=function(){var frames={};var implementation={_DOMFrameReadyHandler:function(e){try{var $frame;if($frame=e.target.ownerCt){$frame.loadHandler.call($frame,e)}}catch(rhEx){}},shimCls:"ux-mif-shim",register:function(frame){frame.manager=this;frames[frame.id]=frames[frame.name]={ref:frame};return frame},deRegister:function(frame){delete frames[frame.id];delete frames[frame.name]},hideShims:function(){var mm=MIF.Manager;mm.shimsApplied&&Ext.select("."+mm.shimCls,true).removeClass(mm.shimCls+"-on");mm.shimsApplied=false},showShims:function(){var mm=MIF.Manager;!mm.shimsApplied&&Ext.select("."+mm.shimCls,true).addClass(mm.shimCls+"-on");mm.shimsApplied=true},getFrameById:function(id){return typeof id=="string"?(frames[id]?frames[id].ref||null:null):null},getFrameByName:function(name){return this.getFrameById(name)},getFrameHash:function(frame){return frames[frame.id]||frames[frame.id]||null},_flyweights:{},destroy:function(){if(document.addEventListener&&!Ext.isOpera){window.removeEventListener("DOMFrameContentLoaded",this._DOMFrameReadyHandler,false)}delete this._flyweights}};document.addEventListener&&!Ext.isOpera&&window.addEventListener("DOMFrameContentLoaded",implementation._DOMFrameReadyHandler,false);Ext.EventManager.on(window,"beforeunload",implementation.destroy,implementation);return implementation}();MIM=MIF.Manager;MIM.showDragMask=MIM.showShims;MIM.hideDragMask=MIM.hideShims;var winDD=Ext.Window.DD;Ext.override(winDD,{startDrag:winDD.prototype.startDrag.createInterceptor(MIM.showShims),endDrag:winDD.prototype.endDrag.createInterceptor(MIM.hideShims)});Ext.ux.ManagedIFramePanel=MIF.Panel;Ext.ux.ManagedIFramePortlet=MIF.Portlet;Ext.ux.ManagedIframe=function(el,opt){var args=Array.prototype.slice.call(arguments,0),el=Ext.get(args[0]),config=args[0];if(el&&el.dom&&el.dom.tagName=="IFRAME"){config=args[1]||{}}else{config=args[0]||args[1]||{};el=config.autoCreate?Ext.get(Ext.DomHelper.append(config.autoCreate.parent||Ext.getBody(),Ext.apply({tag:"iframe",frameborder:0,cls:"x-mif",src:(Ext.isIE&&Ext.isSecure)?Ext.SSL_SECURE_URL:"about:blank"},config.autoCreate))):null;if(el&&config.unsupportedText){Ext.DomHelper.append(el.dom.parentNode,{tag:"noframes",html:config.unsupportedText})}}var mif=new MIF.Element(el,true);if(mif){Ext.apply(mif,{disableMessaging:Ext.value(config.disableMessaging,true),loadMask:!!config.loadMask?Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:null,hideOnReady:false,disabled:false},config.loadMask):false,_windowContext:null,eventsFollowFrameLinks:Ext.value(config.eventsFollowFrameLinks,true)});config.listeners&&mif.on(config.listeners);if(!!config.html){mif.update(config.html)}else{!!config.src&&mif.setSrc(config.src)}}return mif};Ext.ux.ManagedIFrame.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg;Ext.Error.call(this,message)},name:"Ext.ux.ManagedIFrame"});Ext.apply(Ext.ux.ManagedIFrame.Error.prototype,{lang:{"documentcontext-remove":"An attempt was made to remove an Element from the wrong document context.","execscript-secure-context":"An attempt was made at script execution within a document context with limited access permissions.",printexception:"An Error was encountered attempting the print the frame contents (document access is likely restricted)."}});Ext.onReady(function(){var CSS=new Ext.ux.ManagedIFrame.CSS(document),rules=[];CSS.getRule(".ux-mif-fill")||(rules.push(".ux-mif-fill{height:100%;width:100%;}"));CSS.getRule(".ux-mif-mask-target")||(rules.push(".ux-mif-mask-target{position:relative;zoom:1;}"));CSS.getRule(".ux-mif-el-mask")||(rules.push(".ux-mif-el-mask {z-index: 100;position: absolute;top:0;left:0;-moz-opacity: 0.5;opacity: .50;*filter: alpha(opacity=50);width: 100%;height: 100%;zoom: 1;} ",".ux-mif-el-mask-msg {z-index: 1;position: absolute;top: 0;left: 0;border:1px solid;background:repeat-x 0 -16px;padding:2px;} ",".ux-mif-el-mask-msg div {padding:5px 10px 5px 10px;border:1px solid;cursor:wait;} "));if(!CSS.getRule(".ux-mif-shim")){rules.push(".ux-mif-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}");rules.push(".ux-mif-shim-on{width:100%;height:100%;display:block;zoom:1;}");rules.push(".ext-ie6 .ux-mif-shim{margin-left:5px;margin-top:3px;}")}!!rules.length&&CSS.createStyleSheet(rules.join(" "),"mifCSS")});Ext.provide&&Ext.provide("mif")})()(function(){var a=function(){var f={"$":[]};var g=function(i,h){return i===null||i===undefined||(!h?i==="":false)};var e=function(j,k,i){if(i){e(j,i)}if(j&&k&&typeof k=="object"){for(var h in k){j[h]=k[h]}}return j};window.sendMessage=function(s,t,r){var m;if(m=arguments.callee.manager){if(s._fromHost){var q,u;var h=s.tag||t||null;var j=!g(h)?f[String(h).toLowerCase()]||[]:f["$"];for(var n=0,k=j.length;n<k;n++){if(q=j[n]){u=q.apply(q.__scope,arguments)===false?false:u;if(q.__single){j[n]=null}if(u===false){break}}}return u}else{s={type:"message",data:s,domain:r||document.domain,uri:document.documentURI,source:window,tag:t?String(t).toLowerCase():null};try{return m.disableMessaging!==true?m._observable?m._observable.fireEvent.call(m._observable,s.type,m,s):null:null}catch(p){}return null}}};window.onhostmessage=function(l,j,m,h){if(typeof l=="function"){if(!g(l.__index)){throw"onhostmessage: duplicate handler definition"+(h?" for tag:"+h:"")}var i=g(h)?"$":h.toLowerCase();f[i]||(f[i]=[]);e(l,{__tag:i,__single:m||false,__scope:j||window,__index:f[i].length});f[i].push(l)}else{throw"onhostmessage: function required"}};window.unhostmessage=function(i){if(typeof i=="function"&&typeof i.__index!="undefined"){var h=i.__tag||"$";f[h][i.__index]=null}}};var b=Ext.ux.ManagedIFrame.Element;Ext.override(b,{disableMessaging:true,_renderHook:b.prototype._renderHook.createSequence(function(){if(this.disableMessaging){return}var f=this._observable;f&&(f.events.message||(f.addEvents("message")));if(this.domWritable()){this.loadFunction({name:"XMessage",fn:a},false,true);var g,e=this.getWindow();e&&(g=e.sendMessage)&&(g.manager=this)}}),sendMessage:function(g,e,f){var h;if(this.domWritable()&&(h=this.getWindow())){e||(e=g.tag||"");e=e.toLowerCase();g=Ext.applyIf(g.data?g:{data:g},{type:"message",domain:f||document.domain,origin:f||document.domain,uri:document.documentURI,source:window,tag:e||null,_fromHost:this});return h.sendMessage?h.sendMessage.call(null,g,e,f):undefined}return},postMessage:function(j){var k,f=this.getWindow();if(f&&!this.disableMessaging){var h=[String(j||"")].concat(Array.prototype.slice.call(arguments,1));var e=h.length;var g=e>1?h[e-1]:undefined;typeof g==="string"||h.push(document.domain);var i=f.postMessage||(k=this.getDocument()?k.postMessage:null);i&&i.apply(f,h)}}});var c=Ext.ux.ManagedIFrame;Ext.each(["Component","Panel","Window"],function(e){c[e]&&Ext.override(c[e],{sendMessage:function(){this.getFrame()&&this.frameEl.sendMessage.apply(this.frameEl,arguments)}})});var d=c.Manager;d&&Ext.apply(d,{onMessage:function(i){var g=i.browserEvent;g&&Ext.apply(i,{origin:g.origin,data:g.data,lastEventId:g.lastEventId,source:g.source});try{var f;if(f=g&&g.source?g.source.frameElement.id:null){f=this.getFrameById(f);f&&f._observable.fireEvent("message",f,i)}}catch(h){}},destroy:d.destroy.createSequence(function(){(window.postMessage||document.postMessage)&&Ext.EventManager.un(window,"message",this.onMessage,this)})});d&&(window.postMessage||document.postMessage)&&Ext.EventManager.on(window,"message",d.onMessage,d)})();Ext.provide&&Ext.provide("mifmsg");